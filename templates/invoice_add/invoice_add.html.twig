{% extends 'base.html.twig' %}

{% block stylesheets1 %}
    <link rel="stylesheet" href="/css/invoice_add.css">
{% endblock %}

{% block content %}
    
    <h1>Choose positions and its quantity: </h1>

    {{ form_start(form_position) }}
    {{ form_rest(form_position) }}
    {{ form_end(form_position) }}

    {% if integer == false %}
        <div class='note' >
            TYPE INTEGER NUMBER !! <br> 
        </div>
    {% endif %}

    {% if zero == 0 %}
        <div class='note' >
            TYPE MORE THAN 0 !! <br> 
        </div>
    {% endif %}

    {% if note_position == 1 %}
        <div class='note' >
            CHOOSE THE POSITION !! <br> 
        </div>
    {% endif %}

            
        <table>

            <tr>
                <th>ID of Position</th><th>Name</th><th>Value</th><th>Quantity</th><th>Sum</th>
            </tr>
            
        {% set sum = 0 %}

        {% for invoicePosition in invoicePositionsArray %}   
            <tr>
                <td> {{invoicePosition.position.id}} </td>
                <td> {{invoicePosition.position.name}} </td>
                <td> {{invoicePosition.position.value}}</td>
                <td> {{invoicePosition.quantity}}</td>
                <td> 
                    {{invoicePosition.position.value * invoicePosition.quantity}} 
                    {% set sum = sum + invoicePosition.position.value * invoicePosition.quantity %}
                </td>
            </tr>
        {% endfor %}

        </table>

        <h4>Total sum: {{sum}}</h4> <br>


    <h1>Add Supplier and Recipient: </h1>
   
    {{form(form)}}   
    
    {% if note_invoice == 1 %}
        <div class='note' >
            INVOICE HAS NOT ADDED!! <br> 
            Recipient or Supplier field CAN'T be empty !!!!!!!!!!!!!!
        </div>
    {% elseif note_invoice == 2 %}
        <div class='note' >
            INVOICE HAS SUCCESSFULLY ADDED!! <br> 
        </div>
    {% endif %} <br><br>

    <button type='button' id='clear'><a href="{{ path ('invoice_add', {session: 0} ) }}"> CLEAR ALL!!  </a></button><br><br>

    <a href="{{ path('invoices') }}">BACK TO LIST OF INVOICES  !!!!  >>>>></a><br><br>
  
        
{% endblock %}


