{% extends 'base.html.twig' %}

{% block stylesheets1 %}
    <link rel="stylesheet" href="/css/invoices.css">
{% endblock %}

{% block content %}
    
    <h1>Add New Invoice</h1>   

    {{form(form)}}

    <button type="button"><a class="button" href="{{ path('invoices') }}">Renew the list</a></button>

    <h1>List of Invoices:</h1> 
            <table>
                <tr>
                    <th>ID of Invoice</th><th>Supplier</th><th>Recipient</th><th>Sum</th><th>ADD Positions</th>
                </tr>
                
                {% for invoice in invoices %} 
                    <tr>
                        <td> {{invoice.id}} </td>
                        <td> {{invoice.supplier}} </td>
                        <td> {{invoice.recipient}} </td>
                        <td> 
                           
                            {% set sum2 = 0 %}

                            {% for invoicePosition in invoice.getInvoicePosition %}
                                {% if invoice == invoicePosition.getInvoice %}                                  
                                    {% set sum2 = sum2 + invoicePosition.getQuantity * invoicePosition.getPosition.getValue %}
                                {% endif %}
                            {% endfor %}
            
                            {{sum2}}
   
                        </td>
                        <td><a href="{{ path('invoice_edit', {id_invoice: invoice.id}) }}">add the positions to the invoice  >></a></td>
                    </tr>
                {% endfor %}   
            </table>
       
        
{% endblock %}


